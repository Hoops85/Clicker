const contractAddress = "0x86b550EA81eA81a55DD4a1354E6bf4855d7abF4D";
const abi = [
  "function click() public",
  "event Clicked(address indexed user, uint256 totalClicks, string message)"
];

// 🎯 Set your fixed UTC start datetime here
const campaignStartTime = new Date('2025-04-30T12:00:00Z').getTime();

// 🎯 Set your campaign duration here (in milliseconds)
const campaignDuration = 3 * 24 * 60 * 60 * 1000; // 3 days

const countdownTarget = campaignStartTime + campaignDuration;

function startCountdown() {
  const countdownEl = document.getElementById("countdown");
  const mintButton = document.getElementById("mintButton");

  const interval = setInterval(() => {
    const now = new Date().getTime();

    if (now < campaignStartTime) {
      const timeUntilStart = campaignStartTime - now;
      const days = Math.floor(timeUntilStart / (1000 * 60 * 60 * 24));
      const hours = Math.floor((timeUntilStart % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((timeUntilStart % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((timeUntilStart % (1000 * 60)) / 1000);

      countdownEl.innerHTML = `⏳ Minting opens in ${days}d ${hours}h ${minutes}m ${seconds}s`;
      mintButton.disabled = true;
      mintButton.innerText = "Minting Not Started";
    }
    else if (now >= campaignStartTime && now <= countdownTarget) {
      const remaining = countdownTarget - now;
      const days = Math.floor(remaining / (1000 * 60 * 60 * 24));
      const hours = Math.floor((remaining % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((remaining % (1000 * 60)) / 1000);

      countdownEl.innerHTML = `⏳ Ends in ${days}d ${hours}h ${minutes}m ${seconds}s`;
      mintButton.disabled = false;
      mintButton.innerText = "Mint Your Chance";
    }
    else {
      clearInterval(interval);
      countdownEl.innerHTML = "⏳ Minting period has ended.";
      mintButton.disabled = true;
      mintButton.innerText = "Minting Closed";
    }
  }, 1000);
}

startCountdown();
